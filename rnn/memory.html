<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Memory</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

  <style>
    button {
      padding: 8px;
    }
    .number {
      border: 4px solid black;
      text-align: center;
      width: 250px;
      height: 250px;
      margin: 20px 0px 12px 0px;
      display: grid;
      grid-template-columns: 1fr;
      align-items: center;
    }
    .number div {
      font-size: 106pt;
      font-weight: bold;
    }
    .fadein {
      animation: fadeIn linear 1s;
    }
    .fadeout {
      animation: fadeOut linear 1s;
    }
    @keyframes fadeIn {
      0% {opacity:0;}
      100% {opacity:1;}
    }
    @keyframes fadeOut {
      0% {opacity:1;}
      100% {opacity:0;}
    }    
  </style>
</head>

<body>
  <div class="app-container">
    <div id="my-interactive"></div>
    <div class="app">
      <div class="number">
        <div v-if="currentIndex !== undefined" :class="{fadein: isFadein, fadeout: isFadeout}">
          {{numbers[currentIndex]}}
        </div>  
      </div>
      <button @click="startGame(3)">Add 3 Numbers</button>
      <button @click="startGame(7)">Add 7 Numbers</button>
    </div>

  </div>

<script>
var app = new Vue({
    el: '.app',
    data: {
      isFadein: false,
      isFadeout: false,
      numbers: [],
      currentIndex: undefined,
      interval: undefined,
    },
    methods: {
      startGame(n) {
        this.numbers = []

        for (let i = 0; i < n; ++i) {
          this.numbers.push(this.randomInt())
        }

        this.currentIndex = 0

        this.stopTimer()

        this.interval = setInterval(() => {
          if (this.currentIndex < this.numbers.length - 1) {
            this.currentIndex += 1
          } else {
            this.currentIndex = undefined
            this.stopTimer()
          }
        }, 5000)
      },
      randomInt() {
        return Math.floor(Math.random() * 5 + 1)
      },
      stopTimer() {
        if (this.interval) {
          clearInterval(this.interval)

          this.interval = undefined
        }
      }
    },
    computed: {
      currentNumber() {
        return this.numbers[this.currentIndex]
      }
    }
})
</script>

</body>

</html>
